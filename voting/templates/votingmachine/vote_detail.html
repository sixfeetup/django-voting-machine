{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
<head>
    <meta charset="utf-8">
    <title>{{option_a}} vs {{option_b}}!</title>
    <base href="/index.html">
    <meta name = "viewport" content = "width=device-width, initial-scale = 1.0">
    <meta name="keywords" content="docker-compose, docker, stack">
    <meta name="author" content="Tutum dev team">
    <link rel='stylesheet' href='{% static '/css/style.css' %}' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</head>

    <div class="row">
    <div class="col-md-8">
      <div class="panel panel-default">
        <div class="panel-body">
            <div class="row">
                <h2>Voting Machine Sixfeetup<p class="lead">It's time to start voting</p></h2>
            </div>
        </div>
      </div>
    </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-body">
          <img src="{{ team.user }}" class="img-circle center-block" height="100" width="100">
          <a href="{% url "users:detail" request.user.username %}"><h4 class="text-center">{{ request.user.username }}</h4></a>
        </div>
    </div>
<hr>
  <div class="container">
    <ul>{% for team in event.team_set.all %}
            <li><h3>{{ team }}</h3>
                {% for cat in cats %}
                    {{cat.0}} - {{ cat.1 }}
                    <form class="form-inline">
                        <div class="input-group">
                          <span class="input-group-addon">
                            <input type="radio" name="{{ cat.1 }}-vote"
                                   data-value="1" data-team="{{ team.id }}" data-cat="{{cat.0}}">
                            <i class="fa fa-star-o"></i>
                          </span>
                          <span class="input-group-addon">
                            <input type="radio" name="{{ cat.1 }}-vote"
                                   data-value="2" data-team="{{ team.id }}" data-cat="{{cat.0}}">
                            <i class="fa fa-star-o"></i><i class="fa fa-star-o"></i>
                          </span>
                          <span class="input-group-addon">
                            <input type="radio" name="{{ cat.1 }}-vote"
                                   data-value="3" data-team="{{ team.id }}" data-cat="{{cat.0}}">
                            <i class="fa fa-star-o"></i><i class="fa fa-star-o"></i><i class="fa fa-star-o"></i>
                          </span>
                        </div>
                     </form>
                {% endfor %}
       {% empty %}
           <li>No Teams yet.</li>
        {% endfor %}
    </ul>
   <div id="content-container">
      <div id="content-container-center">
        <h3>{{option_a}} vs {{option_b}} vs {{option_c}}!</h3>
        <form id="choice" name='form' method="POST" action="/">
          <button id=+1 type="submit" name="vote" class="1" value=+1>{{option_a}}</button>
          <button id=+2 type="submit" name="vote" class="2" value=+2>{{option_b}}</button>
          <button id=+3 type="submit" name="vote" class="3" value=+3>{{option_c}}</button>
        </form>
      </div>
    </div>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
  </div>

    <script>
    
    
    (function($) { $(function() {
        $('input[type="radio"]').change(function(){
            var vdata = {
                team_id: $(this).attr("data-team"),
                category: $(this).attr("data-cat"),
                value: $(this).attr("data-value"),
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }
             $.post('{{ request.path }}collect/?', vdata)
         })
    }); })(jQuery);
    </script>

{% endblock %}
